var x=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var m=(n,e,o,a)=>{for(var r=a>1?void 0:a?y(e,o):e,d=n.length-1,l;d>=0;d--)(l=n[d])&&(r=(a?l(e,o,r):l(r))||r);return a&&r&&x(e,o,r),r};import{h as t,tag as w,render as f,Component as A,classNames as h}from"/libs/wpa/";import{config as R}from"/configs/apps/";import{currencyFormatter as g,dateFormatter as b}from"/commons/formatter/";import k from"/hosts/base/";import{esLoad as C}from"/commons/loader/";import{AppContainerTag as I}from"/containers/base/";import v from"/csses/bootstrap/reboot/";import N from"/csses/bootstrap/root/";var c=":host{font-size:calc(1rem + .2vw);display:grid;grid-template-columns:12em 1fr;grid-template-rows:3em auto;height:100vh}@media screen and (max-width: 768px){:host{grid-template-columns:0 1fr}}:host header{grid-row:1;grid-column:1/3;background-color:#2d2d2d;border-bottom:1px solid #989494;display:flex;align-items:center;color:var(--bs-white)}:host aside{background-color:#2d2d2d;padding:.6em 0}:host aside ul{padding-left:0}:host aside>ul>li>a{text-indent:.5em}:host aside>ul>li>ul a{text-indent:2em}:host aside>ul li{list-style:none;line-height:2;margin:.1em}:host aside>ul li a{display:block;color:var(--bs-white);text-decoration:none}:host aside>ul li a:hover{color:#d5e7f7;background-color:#1c1212}:host aside>ul li a.active{color:#e0a751;background-color:#1a0d0d}:host main{background-color:#fff;padding:1rem;padding-right:.2rem;box-sizing:border-box;overflow:hidden}:host .app-container{display:block;height:100%;overflow:auto}:host .app-container.hidden{display:none}";var p="demo-5{font-size:2.5rem}.btn{--bs-btn-font-size: 2rem}";var u="html{font-size:62.5%}body{margin:0;height:100%;overflow:hidden}";console.log(g.manifest,b.manifest);console.log(g(123),b(new Date));var s=new k(C);var i=class extends A{async install(){this.menus=R.menus,s.registerApps(...this.menus),s.onRoute((e,o,a)=>{console.log("onRoute",e,o,a),this.updateSelf()}),s.onBeforeRoute((e,o,a)=>{if(console.log("onBeforeRoute",e,o,a),e.manifest.name==="SECOND-APP")return confirm("是否进入SECOND App？")}),s.routeTo(s.activePath)}buildNavs(e){return t("ul",null,e.map(o=>t("li",null,t("a",{className:h({active:s.getAppRouteInfo(s.activeApp)===o}),href:`#${o.path}`},o.name),o.children&&this.buildNavs(o.children))))}render(){return t(t.f,null,t("header",null,"Main"),t("aside",null,this.buildNavs(this.menus)),t("main",{class:"scrollable"},s.loadedApps.map(e=>t(I,{app:e,host:s,class:h("app-container","scrollable",{hidden:s.activeApp.manifest!==e.manifest})}))))}};i.css=[v.cssss,c],i=m([w("simple-app")],i);f(t("simple-app",{"theme-css":p}),document.body);document.adoptedStyleSheets.push(N.cssss,v.cssss);f(t("style",null,u),document.head);
